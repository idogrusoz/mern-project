(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{228:function(e,t,a){e.exports=a(423)},233:function(e,t,a){},234:function(e,t,a){},423:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),o=a.n(c),i=(a(233),a(470)),s=(a(234),a(7)),l=a.n(s),u=a(15),m=a(9),d=a(208),f=a.n(d).a.create({baseURL:"http://localhost:5000/api/v1/",withCredentials:!0}),p={isAuthenticated:function(){return new Promise((function(){return!1}))},authenticated:!1,setAuthenticated:function(){},user:null,setUser:function(){},signOut:function(){return new Promise((function(){}))}},h=Object(n.createContext)(p),b=function(e){var t=e.children,a=Object(n.useState)(!1),c=Object(m.a)(a,2),o=c[0],i=c[1],s=Object(n.useState)(null),d=Object(m.a)(s,2),p=d[0],b=d[1],v=Object(n.useCallback)(Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.get("auth/authenticate");case 3:t=e.sent,i(t.data.isAuthenticated),p||b(t.data.user),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),i(!1),b(null);case 12:case"end":return e.stop()}}),e,null,[[0,8]])}))),[p]),g=Object(n.useCallback)(Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.get("auth/signout");case 3:i(!1),b(null),e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(0),console.log("Error : ",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])}))),[]),E=Object(n.useMemo)((function(){return{isAuthenticated:v,authenticated:o,setAuthenticated:i,user:p,setUser:b,signOut:g}}),[v,o,i,p,b,g]);return r.a.createElement(h.Provider,{value:E},t)},v=a(96),g=a(456),E=a(473),O=a(25),x=a(458),j=a(459),w=a(132),C=a(224),k=a(222),y=a(212),S=a.n(y),N=a(17),T=a(453),W=a(475),A=a(220),F=a(476),P=function(e){var t=e.handleClick,a=e.anchorEl,c=e.handleClose,o=e.goToAdd,i=e.goToProfile,s=e.handleSignOut,l=Object(n.useContext)(h).user;return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{color:"secondary","aria-controls":"simple-menu","aria-haspopup":"true",onClick:t},r.a.createElement(W.a,{src:l?l.image:void 0})),r.a.createElement(A.a,{id:"simple-menu",anchorEl:a,keepMounted:!0,open:Boolean(a),onClose:c},r.a.createElement(F.a,{onClick:i},"Profile"),r.a.createElement(F.a,{onClick:o},"AddPost"),r.a.createElement(F.a,{onClick:s},"SignOut")))},I=a(457),L=Object(g.a)({result:{marginTop:10,overflow:"hidden","&:hover":{backgroundColor:"#ffffff",cursor:"pointer"}}}),B=function(e){var t=e.user,a=e.pickUser,n=L();return r.a.createElement(I.a,{container:!0,alignItems:"center",onClick:function(){return a(t)},className:n.result},r.a.createElement(I.a,{item:!0,xs:3},r.a.createElement(W.a,{src:t.image})),r.a.createElement(I.a,{item:!0,xs:9},r.a.createElement(w.a,null,t.userName)))},_=Object(n.createContext)({profileOwner:null,setProfileOwner:function(){}}),R=function(e){var t=e.children,a=Object(n.useState)(null),c=Object(m.a)(a,2),o=c[0],i=c[1],s=Object(n.useMemo)((function(){return{profileOwner:o,setProfileOwner:i}}),[o,i]);return r.a.createElement(_.Provider,{value:s},t)},z=Object(g.a)((function(e){return Object(E.a)({grow:{flexGrow:1},search:Object(v.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(O.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(O.b)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(v.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),result:{"&:hover":{backgroundColor:"#ffffff",cursor:"pointer"}},resultContainer:{position:"absolute",width:"100%",maxHeight:200,backgroundColor:"rgba(255, 255, 255, 0.7)",overflowY:"auto"}})})),M=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),i=Object(m.a)(o,2),s=i[0],d=i[1],p=Object(n.useState)(null),b=Object(m.a)(p,2),v=b[0],g=b[1],E=Object(n.useContext)(h),O=E.signOut,y=E.user,T=Object(n.useContext)(_).setProfileOwner,W=Object(N.g)(),A=z(),F=function(e){T(e),d(!1),W.push("/profile/".concat(e._id))},I=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:g(null);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.get("users/search/".concat(t.target.value));case 3:a=e.sent,c(a.data.data),d(a.data.data.length>0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),c([]);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),R=Object(n.useRef)(),M=function(e){R.current&&!R.current.contains(e.target)&&d(!1)};return Object(n.useEffect)((function(){window.addEventListener("mousedown",M,!1)}),[]),r.a.createElement(x.a,null,r.a.createElement(j.a,{style:{display:"flex",justifyContent:"space-around"}},r.a.createElement(w.a,{variant:"h6",style:{fontWeight:900}},"KERPICH"),y&&r.a.createElement("div",{className:A.search},r.a.createElement("div",{className:A.searchIcon},r.a.createElement(S.a,null)),r.a.createElement(C.a,{placeholder:"Search\u2026",classes:{root:A.inputRoot,input:A.inputInput},inputProps:{"aria-label":"search"},onChange:L}),s&&r.a.createElement(k.a,{className:A.resultContainer,ref:R},a.map((function(e,t){return r.a.createElement(B,{user:e,pickUser:F,key:t})})))),y&&r.a.createElement(P,{handleClick:function(e){g(e.currentTarget)},handleClose:function(){g(null)},anchorEl:v,goToProfile:function(){g(null),T(null),W.push("/")},goToAdd:function(){g(null),W.push("/add-post")},handleSignOut:I})))},U=a(469),q=a(460),V=function(e){var t=e.backgroundColor,a=e.color,n=e.fontFamily,c=e.fontSize,o=e.fontWeight,i=e.textAlign,s=e.textContent,l=Object(q.a)("(min-width: 650px)"),u=Object(g.a)({wrapper:{display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden",width:l?600:330,height:l?400:220,backgroundColor:t,margin:"auto"},text:{display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden",width:l?600:330,height:l?400:220,fontFamily:n,color:a,fontWeight:o,fontSize:l?c:.55*c,margin:"auto",textAlign:i}})();return r.a.createElement(I.a,{container:!0,justify:"center"},r.a.createElement(I.a,{item:!0,md:12},r.a.createElement(k.a,{elevation:3,className:u.wrapper},r.a.createElement(w.a,{className:u.text},s))))},D=a(463),H=a(213),Y=function(e){var t=e.label,a=e.color,n=e.setColor;return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{variant:"caption"},t),r.a.createElement(H.SliderPicker,{color:a,onChangeComplete:function(e){return n(e.hex)}}))},K=a(471),J=function(e){var t=e.setFontFamily,a=e.setFontWeightValues,n=[{label:"Caveat",value:"Caveat",options:[400,700]},{label:"Dancing Script",value:"Dancing Script",options:[400,700]},{label:"Kalam",value:"Kalam",options:[300,400,700]},{label:"Lemonada",value:"Lemonada",options:[300,400,700]},{label:"Lobster",value:"Lobster",options:[400,700]},{label:"Montserrat",value:"Montserrat",options:[100,400,700,900]},{label:"Montserrat Alternates",value:"Montserrat Alternates",options:[100,400,700,900]},{label:"Permanent Marker",value:"Permanent Marker",options:[400]},{label:"Roboto",value:"Roboto",options:[100,400,900]},{label:"Sansita Swashed",value:"Sansita Swashed",options:[400,700,900]}];return r.a.createElement(K.a,{fullWidth:!0,defaultValue:8,onChange:function(e){return r=Number(e.target.value),t(n[r].value),void a(n[r].options);var r}},n.map((function(e,t){return r.a.createElement(F.a,{value:t,key:t},e.label)})))},X=function(e){var t=e.fontSize,a=e.setFontSize;return r.a.createElement(K.a,{fullWidth:!0,defaultValue:t,onChange:function(e){return a(Number(e.target.value))}},[16,20,22,24,28,32,36,40,48,56,64,72,144].map((function(e,t){return r.a.createElement(F.a,{value:e,key:t},e)})))},G=function(e){var t=e.fontWeight,a=e.fontWeightValues,c=e.setFontWeight;return Object(n.useEffect)((function(){-1===a.indexOf(t)&&c(a[0])}),[t,c,a]),r.a.createElement(K.a,{fullWidth:!0,onChange:function(e){return c(Number(e.target.value))},value:t},a.map((function(e,t){return r.a.createElement(F.a,{value:e,key:t},e)})))},$=function(e){var t=e.textAlign,a=e.setTextAlign;return r.a.createElement(K.a,{defaultValue:t,onChange:function(e){var t=e.target.value;a(t)},fullWidth:!0},["left","right","justify","center"].map((function(e,t){return r.a.createElement(F.a,{value:e,key:t},(a=e).charAt(0).toUpperCase()+a.slice(1));var a})))},Q=a(472),Z=function(e){var t=e.textContent,a=e.setTextContent;return r.a.createElement(Q.a,{id:"standard-basic",label:"Text",type:"text",onChange:function(e){return a(e.target.value)},value:t,fullWidth:!0})},ee=function(e){var t=e.textContent,a=e.setTextContent,n=e.setFontFamily,c=e.color,o=e.setColor,i=e.backgroundColor,s=e.setBackgroundColor,l=e.fontWeight,u=e.setFontWeight,m=e.fontSize,d=e.setFontSize,f=e.textAlign,p=e.setTextAlign,h=e.addPost,b=e.fontWeightValues,v=e.setFontWeightValues,E=Object(N.g)(),O=Object(q.a)("(min-width: 650px)"),x=Object(g.a)({container:O?{maxWidth:"500px",margin:"auto"}:{marginTop:30}})();return r.a.createElement(I.a,{container:!0,direction:"row",spacing:5,className:x.container},r.a.createElement(I.a,{container:!0,justify:"space-around",direction:"row"},r.a.createElement(I.a,{item:!0,xs:6},r.a.createElement(I.a,{container:!0,justify:"center"},r.a.createElement(I.a,{item:!0},r.a.createElement(D.a,{color:"primary",variant:"contained",onClick:h},"Share")))),r.a.createElement(I.a,{item:!0,xs:6},r.a.createElement(I.a,{container:!0,justify:"center"},r.a.createElement(I.a,{item:!0},r.a.createElement(D.a,{color:"secondary",variant:"contained",onClick:function(){return E.goBack()}},"Cancel"))))),r.a.createElement(I.a,{item:!0,xs:12},r.a.createElement(Z,{textContent:t,setTextContent:a})),r.a.createElement(I.a,{item:!0,xs:6},r.a.createElement(J,{setFontFamily:n,setFontWeightValues:v})),r.a.createElement(I.a,{item:!0,xs:6},r.a.createElement(G,{fontWeight:l,setFontWeight:u,fontWeightValues:b})),r.a.createElement(I.a,{item:!0,xs:6},r.a.createElement(X,{fontSize:m,setFontSize:d})),r.a.createElement(I.a,{item:!0,xs:6},r.a.createElement($,{textAlign:f,setTextAlign:p})),r.a.createElement(I.a,{item:!0,lg:6,xs:12},r.a.createElement(Y,{label:"Color",color:c,setColor:o})),r.a.createElement(I.a,{item:!0,lg:6,xs:12},r.a.createElement(Y,{label:"Backgound Color",color:i,setColor:s})))},te=function(){var e=Object(n.useContext)(h).user,t=Object(N.g)(),a=Object(n.useState)(""),c=Object(m.a)(a,2),o=c[0],i=c[1],s=Object(n.useState)("Roboto"),d=Object(m.a)(s,2),p=d[0],b=d[1],v=Object(n.useState)("#000000"),E=Object(m.a)(v,2),O=E[0],x=E[1],j=Object(n.useState)("#ffffff"),w=Object(m.a)(j,2),C=w[0],k=w[1],y=Object(n.useState)(400),S=Object(m.a)(y,2),T=S[0],W=S[1],A=Object(n.useState)(16),F=Object(m.a)(A,2),P=F[0],L=F[1],B=Object(n.useState)("left"),_=Object(m.a)(B,2),R=_[0],z=_[1],M=Object(n.useState)([100,400,900]),U=Object(m.a)(M,2),D=U[0],H=U[1],Y=Object(q.a)("(min-width: 650px)"),K=Object(g.a)({container:{padding:Y?"100px 120px":"20px"}})(),J=function(){var a=Object(u.a)(l.a.mark((function a(){var n;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n={author:{user_id:e._id,userName:e.userName,image:e.image||""},likes:[],textContent:o,style:{backgroundColor:C,color:O,fontFamily:p,fontSize:P,fontWeight:T,textAlign:R}},a.prev=1,a.next=4,f.post("posts",n);case 4:t.goBack(),a.next=10;break;case 7:throw a.prev=7,a.t0=a.catch(1),a.t0;case 10:case"end":return a.stop()}}),a,null,[[1,7]])})));return function(){return a.apply(this,arguments)}}();return r.a.createElement(I.a,{container:!0,justify:"center",spacing:2,alignItems:"center",direction:"row",className:K.container},r.a.createElement(I.a,{item:!0,md:12,lg:7},r.a.createElement(V,{backgroundColor:C,color:O,fontFamily:p,fontSize:P,fontWeight:T,textAlign:R,textContent:o})),r.a.createElement(I.a,{item:!0,md:12,lg:5},r.a.createElement(ee,{backgroundColor:C,color:O,fontSize:P,fontWeight:T,setBackgroundColor:k,setColor:x,setFontFamily:b,setFontSize:L,setFontWeight:W,setTextAlign:z,setTextContent:i,textAlign:R,textContent:o,addPost:J,fontWeightValues:D,setFontWeightValues:H})))},ae=a(464),ne=a(156),re=a(126),ce=a(33),oe=Object(g.a)({container:{overflowX:"auto",minHeight:" 100vh"}}),ie=function(e){var t=e.register,a=e.setShowSignin,n=e.userNameInput,c=e.setUserNameInput,o=oe(),i=Object(re.a)({validateOnBlur:!0,validateOnChange:!1,initialValues:{firstName:"",lastName:"",userName:"",email:"",password:"",password2:""},onSubmit:function(){var e=Object(ne.a)(Object(ne.a)({},i.values),{},{displayName:i.values.firstName+" "+i.values.lastName});t(e)},validationSchema:ce.a({firstName:ce.c().min(2,"Must be at least two chaeacters").max(30,"Must be maximum 30 characters or less").required("Required").trim(),lastName:ce.c().min(2,"Must be at least two chaeacters").max(30,"Must be maximum 30 characters or less").required("Required").trim(),userName:ce.c().min(3,"Must be at least three chaeacters").max(30,"Must be maximum 30 characters or less").required("Required").test("check user name","This username is not available",function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||t===n){e.next=3;break}return c(t),e.abrupt("return",f.post("users/username",{value:t}).then((function(e){return e.data})).catch((function(e){return!1})));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).trim(),password:ce.c().trim().required(),password2:ce.c().trim().oneOf([ce.b("password"),""],"Passwords must match").required(),email:ce.c().email("Invalid email address").required("Required").trim()})});return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),i.handleSubmit()}},r.a.createElement(I.a,{container:!0,justify:"center",spacing:2,alignItems:"center",direction:"column",className:o.container},r.a.createElement(I.a,{item:!0},r.a.createElement(Q.a,{id:"standard-basic",label:"First Name",type:"text",name:"firstName",onChange:i.handleChange,value:i.values.firstName,error:!(!i.touched.firstName||!i.errors.firstName),helperText:i.touched.firstName?i.errors.firstName:void 0})),r.a.createElement(I.a,{item:!0},r.a.createElement(Q.a,{id:"standard-basic",label:"Last Name",type:"text",name:"lastName",onChange:i.handleChange,value:i.values.lastName,error:!(!i.touched.lastName||!i.errors.lastName),helperText:i.touched.lastName?i.errors.lastName:void 0})),r.a.createElement(I.a,{item:!0},r.a.createElement(Q.a,{id:"standard-basic",label:"User Name",type:"text",name:"userName",onChange:i.handleChange,value:i.values.userName,error:!(!i.touched.userName||!i.errors.userName),helperText:i.touched.userName?i.errors.userName:void 0})),r.a.createElement(I.a,{item:!0},r.a.createElement(Q.a,{id:"standard-basic",label:"Email",type:"text",name:"email",onChange:i.handleChange,value:i.values.email,error:!(!i.touched.email||!i.errors.email),helperText:i.touched.email?i.errors.email:void 0})),r.a.createElement(I.a,{item:!0},r.a.createElement(Q.a,{id:"standard-basic",label:"Password",type:"Password",name:"password",onChange:i.handleChange,value:i.values.password,error:!(!i.touched.password||!i.errors.password),helperText:i.touched.password&&i.errors.password?"Invalid password":void 0})),r.a.createElement(I.a,{item:!0},r.a.createElement(Q.a,{id:"standard-basic",label:"Confirm Password",type:"Password",name:"password2",onChange:i.handleChange,value:i.values.password2,error:!(!i.touched.password2||!i.errors.password2),helperText:i.touched.password2?i.errors.password2:void 0})),r.a.createElement(I.a,{item:!0},r.a.createElement(D.a,{type:"submit",color:"primary",variant:"contained"},"Register")),r.a.createElement(I.a,{item:!0},r.a.createElement(D.a,{id:"signinButton",color:"primary",variant:"contained",onClick:function(){return a(!0)}},"SignIn"))))},se=function(e){var t=e.setShowSignin,a=e.signin,n=Object(re.a)({validateOnBlur:!0,validateOnChange:!1,initialValues:{email:"",password:""},onSubmit:function(){a(n.values)},validationSchema:ce.a({email:ce.c().email("Invalid email address").required("Required").trim(),password:ce.c().trim().required()})});return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n.handleSubmit()}},r.a.createElement(I.a,{container:!0,justify:"center",spacing:2,alignItems:"center",direction:"column",style:{overflowX:"auto",minHeight:" 100vh"}},r.a.createElement(I.a,{item:!0},r.a.createElement(Q.a,{id:"standard-basic",label:"Email",type:"Email",name:"email",onChange:n.handleChange,value:n.values.email,error:!(!n.touched.email||!n.errors.email),helperText:n.touched.email?n.errors.email:void 0})),r.a.createElement(I.a,{item:!0},r.a.createElement(Q.a,{id:"standard-basic",label:"Password",type:"Password",name:"password",onChange:n.handleChange,value:n.values.password,error:!(!n.touched.password||!n.errors.email),helperText:n.touched.password?n.errors.password:void 0})),r.a.createElement(I.a,{item:!0},r.a.createElement(D.a,{type:"submit",variant:"contained",color:"primary",size:"large"},"Sign In")),r.a.createElement(I.a,{item:!0},r.a.createElement(D.a,{variant:"contained",color:"primary",size:"large",onClick:function(){t(!1)}},"Register"))))},le=function(){var e=Object(n.useState)(!0),t=Object(m.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),i=Object(m.a)(o,2),s=i[0],d=i[1],p=Object(n.useState)(""),b=Object(m.a)(p,2),v=b[0],g=b[1],E=Object(n.useContext)(h),O=E.setAuthenticated,x=E.setUser,j=Object(n.useState)(""),C=Object(m.a)(j,2),k=C[0],y=C[1],S=Object(N.g)(),T=Object(n.useCallback)(function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.post("auth/register",t);case 3:a=e.sent,c(200===a.status),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),d(!0),g(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),[]),W=Object(n.useCallback)(function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("object",t),e.next=4,f.post("auth/signin",t);case 4:a=e.sent,O(a.data.isAuthenticated),x(a.data.user),S.push("/"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),d(!0),g(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),[O,x,S]);return r.a.createElement(ae.a,{maxWidth:"sm"},s&&r.a.createElement(w.a,{color:"secondary"},v),a?r.a.createElement(se,{signin:W,setShowSignin:c}):r.a.createElement(ie,{register:T,setShowSignin:c,userNameInput:k,setUserNameInput:y}))},ue=a(131),me=a(465),de=a(466),fe=a(467),pe=a(468),he=a(217),be=a.n(he),ve=a(218),ge=a.n(ve),Ee=Object(g.a)((function(e){return{card:{maxWidth:640},icon:{color:e.palette.secondary.dark},header:{cursor:"pointer"}}})),Oe=function(e){var t=e.post,a=e.fetch,c=Ee(),o=Object(n.useContext)(h).user,i=Object(n.useContext)(_).profileOwner,s=t.style,d=t.textContent,p=t.likes,b=s.backgroundColor,v=s.color,g=s.fontFamily,E=s.fontSize,O=s.fontWeight,x=s.textAlign,j=Object(n.useState)(null),w=Object(m.a)(j,2),C=w[0],k=w[1],y=Object(N.g)().push,S=function(){var e=Object(u.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.put("/posts/".concat(t._id,"/like"),{like:!C});case 3:(n=e.sent).data.error||(k(n.data.data.likes.indexOf(o._id)>-1),i||a()),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=p.indexOf(o._id)>-1;k(e)}),[p,o,t._id]),r.a.createElement(me.a,{className:c.card},r.a.createElement(de.a,{avatar:r.a.createElement(W.a,{"aria-label":"recipe",src:t.author.image}),title:t.author.userName,subheader:new Date(t.createdAt).toDateString()+" "+new Date(t.createdAt).toLocaleTimeString(),onClick:function(){return y("".concat(t.author.user_id))},className:c.header}),r.a.createElement(fe.a,null,r.a.createElement(V,{backgroundColor:b,color:v,fontFamily:g,fontSize:E,fontWeight:O,textAlign:x,textContent:d})),r.a.createElement(pe.a,{disableSpacing:!0},r.a.createElement(T.a,{"aria-label":"like",onClick:S,className:c.icon},C?r.a.createElement(be.a,null):r.a.createElement(ge.a,null))))},xe=Object(g.a)({item:{textAlign:"center",marginTop:"30%"}}),je=function(e){var t=e.activeTab,a=Object(n.useContext)(_).profileOwner,c=Object(N.g)(),o=xe();return r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,{container:!0,justify:"center",alignContent:"center"},r.a.createElement(I.a,{item:!0,xs:12},r.a.createElement(w.a,{variant:"h3",className:o.item},"feed"===t?"You don't follow any users. Use search to find others and follow them so that you can see their posts on ypur feed.":"posts"===t?(a?a.displayName+" doesn't ":"You don't ")+"have any posts yet.":(a?a.displayName+" hasn't":"You haven't")+" liked any posts yet.")),!a&&"posts"===t&&r.a.createElement(I.a,{item:!0,xs:12,className:o.item},r.a.createElement(D.a,{variant:"contained",color:"primary",onClick:function(){c.push("/add-post")}},"Add Post"))))},we=function(e){var t=e.posts,a=e.fetchLikedPosts,c=e.fetchFeed,o=e.fetchUserPosts,i=e.activeTab,s=e.isLoading;return Object(n.useEffect)((function(){"feed"===i&&c(),"posts"===i&&o(),"likes"===i&&a()}),[i,c,o,a]),s?r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(U.a,null)):r.a.createElement(r.a.Fragment,null,t.length>0?t.map((function(e,t){return r.a.createElement(Oe,{post:e,fetch:a,key:t})})):r.a.createElement(je,{activeTab:i}))},Ce=Object(g.a)((function(e){return{icon:{textAlign:"center"},activeTab:{textAlign:"center",backgroundColor:e.palette.primary.dark},activeButton:{color:"#ffffff"}}})),ke=function(e){var t=e.activeTab,a=e.setActiveTab,c=Object(n.useContext)(_).profileOwner,o=Ce();return r.a.createElement(I.a,{container:!0,direction:"row"},!c&&r.a.createElement(I.a,{item:!0,xs:4,className:"feed"===t?o.activeTab:o.icon},r.a.createElement(D.a,{color:"primary",onClick:function(){a("feed")},className:"feed"===t?o.activeButton:void 0,fullWidth:!0,id:"feedButton"},"Feed")),r.a.createElement(I.a,{item:!0,xs:c?6:4,className:"posts"===t?o.activeTab:o.icon},r.a.createElement(D.a,{color:"primary",onClick:function(){a("posts")},className:"posts"===t?o.activeButton:void 0,fullWidth:!0,id:"postsButton"},"Posts")),r.a.createElement(I.a,{item:!0,xs:c?6:4,className:"likes"===t?o.activeTab:o.icon},r.a.createElement(D.a,{color:"primary",onClick:function(){return a("likes")},className:"likes"===t?o.activeButton:void 0,fullWidth:!0,id:"likesButton"},"Likes")))},ye=Object(g.a)({buttonWrapper:{textAlign:"center"}}),Se=function(){var e,t=Object(n.useContext)(h).user,a=Object(n.useContext)(_),c=a.profileOwner,o=a.setProfileOwner,i=ye(),s=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.put("users/".concat(null===c||void 0===c?void 0:c._id,"/follow"));case 3:if(!(t=e.sent).data.error){e.next=6;break}throw new Error(t.data.message);case 6:o(t.data.data),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.put("users/".concat(null===c||void 0===c?void 0:c._id,"/unfollow"));case 3:if(!(t=e.sent).data.error){e.next=6;break}throw new Error(t.data.message);case 6:o(t.data.data),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return c&&r.a.createElement(I.a,{container:!0,alignItems:"center"},r.a.createElement(I.a,{item:!0,xs:2},r.a.createElement(W.a,{src:c.image})),r.a.createElement(I.a,{item:!0,xs:6},r.a.createElement(I.a,{item:!0},r.a.createElement(w.a,{variant:"body1"},c.displayName)),r.a.createElement(I.a,{item:!0},r.a.createElement(w.a,{variant:"subtitle2"},c.userName))),r.a.createElement(I.a,{item:!0,xs:4,className:i.buttonWrapper},-1===(null===(e=c.followers)||void 0===e?void 0:e.indexOf(t._id))?r.a.createElement(D.a,{color:"primary",variant:"contained",onClick:s},"FOLLOW"):r.a.createElement(D.a,{color:"secondary",variant:"contained",onClick:m},"UNFOLLOW")))},Ne=Object(g.a)((function(e){return{container:{display:"flex",justifyContent:"center"},grid:{width:640},icon:{textAlign:"center"},activeTab:{textAlign:"center",backgroundColor:e.palette.primary.dark},activeButton:{color:"#ffffff"}}})),Te=function(){var e=Object(n.useContext)(h).user,t=Object(n.useContext)(_),a=t.profileOwner,c=t.setProfileOwner,o=Object(n.useState)([]),i=Object(m.a)(o,2),s=i[0],d=i[1],p=Object(n.useState)([]),b=Object(m.a)(p,2),v=b[0],g=b[1],E=Object(n.useState)([]),O=Object(m.a)(E,2),x=O[0],j=O[1],w=Object(n.useState)(!0),C=Object(m.a)(w,2),k=C[0],y=C[1],S=Object(n.useState)("feed"),T=Object(m.a)(S,2),W=T[0],A=T[1],F=Object(n.useState)([]),P=Object(m.a)(F,2),L=P[0],B=P[1],R=Object(n.useState)(null),z=Object(m.a)(R,2),M=z[0],U=z[1],q=Ne(),V=Object(N.h)().pathname,D=Object(n.useCallback)(Object(u.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=14;break}return y(!0),t.prev=2,t.next=5,f.get("posts/".concat(null===e||void 0===e?void 0:e._id,"/feed"));case 5:n=t.sent,d(Object(ue.a)(n.data.data)),y(!1),t.next=14;break;case 10:throw t.prev=10,t.t0=t.catch(2),y(!1),t.t0;case 14:case"end":return t.stop()}}),t,null,[[2,10]])}))),[e,a]),H=Object(n.useCallback)(Object(u.a)(l.a.mark((function t(){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return y(!0),n=a?a._id:null===e||void 0===e?void 0:e._id,t.prev=2,t.next=5,f.get("posts/user/".concat(n));case 5:r=t.sent,g(Object(ue.a)(r.data.data)),y(!1),t.next=14;break;case 10:throw t.prev=10,t.t0=t.catch(2),y(!1),t.t0;case 14:case"end":return t.stop()}}),t,null,[[2,10]])}))),[a,e]),Y=Object(n.useCallback)(Object(u.a)(l.a.mark((function t(){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return y(!0),n=a?a._id:null===e||void 0===e?void 0:e._id,t.prev=2,t.next=5,f.get("/posts/likedbyuser/".concat(n));case 5:r=t.sent,j(Object(ue.a)(r.data.data)),y(!1),t.next=14;break;case 10:throw t.prev=10,t.t0=t.catch(2),y(!1),t.t0;case 14:case"end":return t.stop()}}),t,null,[[2,10]])}))),[a,e]),K=function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.get("/users/".concat(t));case 3:a=e.sent,c(a.data.data),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),J=function(t){t===(null===e||void 0===e?void 0:e._id)?c(null):K(t)},X=Object(n.useCallback)((function(){"feed"===W&&B(s),"posts"===W&&B(v),"likes"===W&&B(x)}),[W,s,v,x]);return Object(n.useEffect)((function(){var e=function(e){var t=e.split("/"),a=t.indexOf("profile");return-1!==a?t[a+1]:""}(V);e!==M&&(U(e),""!==e&&e!==(null===a||void 0===a?void 0:a._id)&&J(e)),a&&A("posts"),X()}),[a,W,X,M,V,J]),r.a.createElement(ae.a,{maxWidth:"md",className:q.container},r.a.createElement(I.a,{container:!0,direction:"column",justify:"center",className:q.grid},r.a.createElement(I.a,{item:!0},r.a.createElement("div",{className:q.container},r.a.createElement(Se,null))),r.a.createElement(ke,{activeTab:W,setActiveTab:A}),r.a.createElement(we,{posts:L,fetchLikedPosts:Y,activeTab:W,fetchFeed:D,fetchUserPosts:H,isLoading:k})))},We=function(e){var t=e.children,a=Object(n.useContext)(h).authenticated;return r.a.createElement(N.b,{render:function(e){var n=e.location;return a?t:r.a.createElement(N.a,{to:{pathname:"/login",state:{from:n}}})}})},Ae=function(e){var t=e.history,a=Object(n.useState)(!0),c=Object(m.a)(a,2),o=c[0],i=c[1],s=Object(n.useContext)(h),l=s.authenticated,u=s.user,d=s.isAuthenticated;return Object(n.useEffect)((function(){d().then((function(){l||t.push("/")})).then((function(){return i(!1)})).catch((function(e){return console.log("Error: ",e)}))}),[]),o?r.a.createElement("div",{style:{width:"100",height:"100%",display:"flex",justifyContent:"center"}},r.a.createElement(U.a,null)):r.a.createElement(N.c,{history:t},r.a.createElement(N.d,null,r.a.createElement(N.b,{exact:!0,path:"/"},r.a.createElement(N.a,{to:u&&l?{pathname:"/profile/".concat(u._id)}:{pathname:"/login"}})),r.a.createElement(N.b,{path:"/login",component:le}),r.a.createElement(We,{path:"/profile/:id"},r.a.createElement(Te,null)),r.a.createElement(We,{path:"/add-post"},r.a.createElement(te,null))))},Fe=a(219),Pe=(a(422),Object(Fe.a)({palette:{primary:{main:"#3949ab",light:"#6e74dc",dark:"#00227a"},secondary:{main:"#e65100",light:"#ff833a",dark:"#ac1900"}},typography:{fontFamily:"roboto"}}));var Ie=function(e){return r.a.createElement(b,null,r.a.createElement(R,null,r.a.createElement(i.a,{theme:Pe},r.a.createElement(M,null),r.a.createElement("div",{style:{marginTop:70}},r.a.createElement(Ae,e)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Le=a(41);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Le.a,null,r.a.createElement(N.b,{component:Ie}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[228,1,2]]]);
//# sourceMappingURL=main.7f06ee01.chunk.js.map